
<!DOCTYPE html>

<html>
  <head>
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-QHB6CBHE8P"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QHB6CBHE8P');
   </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to measure “contextual sentiment” in a 10-K &#8212; LeDataSciFi-2025</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/moviescript.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fin377_specialformatting.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/frontpage.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script >const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">LeDataSciFi-2025</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Syllabus
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../about/objectives.html">
   Objectives
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/outcomes.html">
   Outcomes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/about_us.html">
   About us + office hours
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/structure_and_policies.html">
   Course structure + policies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/use_of_gpt.html">
   ChatGPT and other AI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/gradeoverview.html">
   Grading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/interest.html">
   Interested but unsure?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/bootcamp.html">
   Pre-Class Bootcamp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/hall_of_awesomeness.html">
   The Hall of Awesomeness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/acknowledgments.html">
   Gratitude
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/assignments/contextual_sentiment.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2025"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2025/issues/new?title=Issue%20on%20page%20%2Fcontent/assignments/contextual_sentiment.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/LeDataSciFi/ledatascifi-2025/edit/main/content/assignments/contextual_sentiment.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   How to measure “contextual sentiment” in a 10-K
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#topics-you-might-use-non-exhaustive-list">
   Topics you might use (non-exhaustive list)
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="how-to-measure-contextual-sentiment-in-a-10-k">
<h1>How to measure “contextual sentiment” in a 10-K<a class="headerlink" href="#how-to-measure-contextual-sentiment-in-a-10-k" title="Permalink to this headline">¶</a></h1>
<p>If you want to assess the sentiment around a specific topic in a document, you need to create variables that describe it. This is particularly interesting when a firm has an overall positive tone but speaks relatively negatively about a specific topic. It can also be useful when you’re interested in that particular topic. Here’s how you can do it:</p>
<p>First, define a list of words that indicate the topic being discussed. For instance, to capture “Detroit Sports,” you could include “Detroit Lions,” “Red Wings” (specific enough that “Detroit” can be omitted), “Detroit Tigers,” and “Detroit Pistons.” However, figuring out how many synonyms to add can be tricky. Including too many may result in false positives (such as capturing discussions about other topics that contain only “Detroit” or only “Lions”), while including too few could lead to false negatives (missing discussions). Therefore, creating a topic list requires a lot of validation and hard work. If you propose a change, test it on example sentences and see if it affects the larger dataset.</p>
<p>Second, define regex patterns that can identify if the topic is being discussed positively. In class, we discussed how to do this using <code class="docutils literal notranslate"><span class="pre">NEAR_regex</span></code>. Here are the steps:</p>
<ol class="simple">
<li><p>Provide a list of strings like <code class="docutils literal notranslate"><span class="pre">[&quot;topic1&quot;,</span> <span class="pre">&quot;topic2&quot;]</span></code> to <code class="docutils literal notranslate"><span class="pre">NEAR_regex</span></code>. This function will create a regex that looks for <code class="docutils literal notranslate"><span class="pre">&quot;topic1&quot;</span></code> near <code class="docutils literal notranslate"><span class="pre">&quot;topic2&quot;</span></code>.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&quot;topic1&quot;</span></code> with a “list” of strings to look for any of those words near <code class="docutils literal notranslate"><span class="pre">&quot;topic2&quot;</span></code>.</p></li>
<li><p>To create the regex pattern, put a “|” between each term (<code class="docutils literal notranslate"><span class="pre">&quot;|&quot;.join(list_of_words)</span></code>) and add parentheses around the whole thing. For example, <code class="docutils literal notranslate"><span class="pre">&quot;(Detroit</span> <span class="pre">Lions|Red</span> <span class="pre">Wings|Detroit</span> <span class="pre">Tigers|Detroit</span> <span class="pre">Pistons)&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NEAR_regex</span></code> will output a complex regex pattern, which we can call <code class="docutils literal notranslate"><span class="pre">detroit_sports_positive_regex</span></code>.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><a class="reference internal" href="../04/02d_RegexApplication.html"><span class="doc std std-doc">Visit the textbook to learn about anchor phrases (which is the technique you’re using here) and the <code class="docutils literal notranslate"><span class="pre">NEAR_regex</span></code> function.</span></a></p>
</div>
<p>Third, check if that topic is being discussed positively.</p>
<ol class="simple">
<li><p>Select one firm from the files you downloaded and open its 10-K file as a string variable, as if you were inside the loop you set up for this purpose</p></li>
<li><p>Clean the string by removing HTML tags and other non-word characters. You can refer to the notes from class or look through the textbook for guidance. Ensure that the cleaning process is working correctly before proceeding.</p></li>
<li><p>Use the regex pattern to count the number of times the document discusses the selected topic positively: <code class="docutils literal notranslate"><span class="pre">hits</span> <span class="pre">=</span> <span class="pre">len(re.findall(detroit_sports_positive_regex,&lt;clean_10_text&gt;))</span></code>, and then save <code class="docutils literal notranslate"><span class="pre">hits</span></code> to the correct variable in the row corresponding to that 10-K.</p></li>
<li><p><strong>Manually check it by opening the 10-K on the browser - do your functions give you the same values you’d create if you did it by hand?</strong></p></li>
</ol>
<p>Fourth, repeat.</p>
<ul class="simple">
<li><p>Repeat those steps for the negative sentiment version: <code class="docutils literal notranslate"><span class="pre">detroit_sports_negative_regex</span></code></p></li>
<li><p>Repeat those steps for a second topic to create two more variables (one each for positive and negative nearby sentiments)</p></li>
<li><p>Repeat those steps for a third topic (again: positive and negative sentiment)</p></li>
<li><p>For each of those,</p>
<ul>
<li><p>Open some 10-Ks manually and read them to verify if your guess for how to check actually results in hits.</p></li>
<li><p>If it doesn’t work like you think (misses obvious discussions of the risk, or finds non-discussions), tweak it.</p></li>
</ul>
</li>
</ul>
<p>Finally, adjust this so it works on all documents</p>
<ol class="simple">
<li><p>Figure out how to loop (yes, an actual for loop) over the dataframe. Within each row, extract and manipulate the available variables as needed so that you can find the corresponding document.</p>
<ul class="simple">
<li><p>Looping over rows in a pandas dataframe is a little different than normal for-loops! Look up how to do it!</p></li>
<li><p>Test this out: Loop over the dataframe and just print out the filenames it should open.</p></li>
</ul>
</li>
<li><p>Once that works, continue to integrate the code above in the for loop.</p></li>
<li><p><strong>IMPORTANT!</strong> After your code has supposedly done all the work, use <code class="docutils literal notranslate"><span class="pre">.describe()</span></code> on the new variables and check for issues.</p>
<ul class="simple">
<li><p>Make sure you have observations for most/all firms for your new measures. <strong>If not, fix it before proceeding!</strong></p></li>
<li><p>If any of your variables are always 0, it’s meaningless. <strong>Change it before proceeding!</strong></p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="topics-you-might-use-non-exhaustive-list">
<h1>Topics you might use (non-exhaustive list)<a class="headerlink" href="#topics-you-might-use-non-exhaustive-list" title="Permalink to this headline">¶</a></h1>
<p>Remember, as mentioned above, once you choose a topic, you need to specify a list of words that indicate that topic is being discussed.</p>
<ul class="simple">
<li><p>High level/MBA/Porter’s 5: Sales, demand, competition, regulation, suppliers, customers, employees, investment, innovation</p></li>
<li><p>Places: Ukraine, Taiwan,</p></li>
<li><p>Risks: antitrust; litigation - e.g. patent, consumer, class action; real estate; inflation; commodity; supply chain; natural disasters; weather; employees (fraud, compensation, departure); changes in tax policy; currency rates; regulatory approval; reputation; refinancing;</p></li>
<li><p>Prof. Kathleen Hanley <a class="reference external" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2792943">has a recent paper</a> on risks. It focuses on financial firms, which isn’t our sample, but nevertheless, it contains a long list of risks in Table 5 you might find interesting.</p></li>
</ul>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/assignments"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Prof. Donald Bowen<br/>
        
            &copy; Copyright 2025.<br/>
          <div class="extra_footer">
            You're doing well, keep going!
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>